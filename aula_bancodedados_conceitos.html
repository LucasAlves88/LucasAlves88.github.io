<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Aula Interativa - Banco de Dados - Senac SP</title>
    <style>
        :root {
            --senac-blue: #005BAC;
            --senac-orange: #f58220;
            --senac-gray-dark: #333333;
            --senac-gray-light: #f0f0f0;
            --senac-white: #ffffff;
            --senac-border: #cccccc;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background: var(--senac-gray-light);
            color: var(--senac-gray-dark);
        }

        header {
            background-color: var(--senac-blue);
            color: white;
            padding: 1rem;
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            user-select: none;
        }

        nav {
            display: flex;
            background-color: var(--senac-white);
            border-bottom: 2px solid var(--senac-border);
            flex-wrap: wrap;
        }

        nav button {
            flex-grow: 1;
            padding: 1rem;
            border: none;
            background: var(--senac-white);
            color: var(--senac-gray-dark);
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: background-color 0.3s ease;
            border-bottom: 3px solid transparent;
            user-select: none;
            min-width: 120px;
        }

        nav button:hover,
        nav button.active {
            background-color: var(--senac-orange);
            color: var(--senac-white);
            border-bottom: 3px solid var(--senac-blue);
        }

        main {
            padding: 2rem;
            max-width: 1100px;
            margin: auto;
            background-color: var(--senac-white);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            min-height: 600px;
        }

        section {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        h2 {
            color: var(--senac-blue);
            border-bottom: 2px solid var(--senac-orange);
            padding-bottom: 0.3rem;
        }

        h3 {
            margin-top: 1.5rem;
            color: var(--senac-blue);
        }

        ul {
            padding-left: 1.2rem;
            margin-bottom: 1rem;
        }

        .activity {
            margin: 1rem 0 2rem 0;
            padding: 1rem;
            border: 2px solid var(--senac-border);
            border-radius: 6px;
            background: #fafafa;
        }

        .feedback {
            margin-top: 0.5rem;
            font-weight: bold;
        }

        .correct {
            color: green;
        }

        .incorrect {
            color: red;
        }

        img.diagram {
            max-width: 100%;
            height: auto;
            margin-top: 1rem;
            border: 1px solid var(--senac-border);
            border-radius: 4px;
        }

        label {
            display: block;
            margin: 0.3rem 0;
            cursor: pointer;
        }

        input[type="radio"] {
            margin-right: 0.5rem;
        }

        /* Drag and drop styles */
        .drag-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 0.5rem;
        }

        .draggable,
        .draggable-item {
            padding: 0.5rem 1rem;
            background-color: var(--senac-blue);
            color: white;
            border-radius: 5px;
            cursor: grab;
            user-select: none;
            margin-bottom: 5px;
        }

        .drop-target,
        .dropzone {
            min-width: 110px;
            min-height: 60px;
            border: 2px dashed var(--senac-blue);
            border-radius: 5px;
            padding: 0.4rem;
            text-align: center;
            font-style: italic;
            color: var(--senac-gray-dark);
            overflow-y: auto;
            background: #f7faff;
        }

        .dropzone {
            background: #f8fcfa;
        }

        input[type="text"] {
            padding: 0.4rem;
            margin-top: 0.3rem;
            font-size: 1rem;
            border: 1px solid var(--senac-border);
            border-radius: 4px;
        }

        hr {
            border: 1px solid var(--senac-border);
            margin: 2rem 0;
        }

        footer {
            text-align: center;
            padding: 1rem;
            background-color: var(--senac-blue);
            color: white;
            margin-top: 2rem;
            border-radius: 0 0 8px 8px;
            user-select: none;
        }
    </style>
</head>

<body>
    <header>Aula Interativa - Banco de Dados - Senac SP</header>
    <nav id="tabs">
        <button class="tab-button active" data-tab="tab1">Modelagem de Dados</button>
        <button class="tab-button" data-tab="tab2">PK / FK</button>
        <button class="tab-button" data-tab="tab6">Tabelas Associativas</button>
    </nav>
    <main>
        <!-- ======= Modelagem de Dados ======= -->
        <section id="tab1" class="active">
            <h2>Modelagem de Dados</h2>

            <h3>Exemplo prático: Instituição Escolar — Entidade Aluno</h3>
            <ul>
                <li>id_aluno (chave primária)</li>
                <li>nome</li>
                <li>data_nascimento</li>
                <li>cpf</li>
                <li>telefone</li>
                <li>email</li>
            </ul>

            <!-- Exercício Interativo 1 -->
            <div class="activity">
                <p><b>Exercício 1 - Distribua os atributos entre Curso e Matrícula</b></p>
                <p>Arraste e solte os atributos no local correto.</p>
                <div style="display: flex; gap: 1rem;margin-bottom: 1rem;">
                    <div style="flex: 1">
                        <h4>Curso</h4>
                        <div class="drop-target" id="drop-curso" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
                    </div>
                    <div style="flex: 1">
                        <h4>Matrícula</h4>
                        <div class="drop-target" id="drop-matricula" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
                    </div>
                </div>
                <div class="drag-container" id="drag-container">
                    <div draggable="true" class="draggable-item" id="attr-id_curso" ondragstart="drag(event)">id_curso</div>
                    <div draggable="true" class="draggable-item" id="attr-nome_curso" ondragstart="drag(event)">nome_curso</div>
                    <div draggable="true" class="draggable-item" id="attr-duracao_meses" ondragstart="drag(event)">duracao_meses</div>
                    <div draggable="true" class="draggable-item" id="attr-categoria" ondragstart="drag(event)">categoria</div>
                    <div draggable="true" class="draggable-item" id="attr-id_matricula" ondragstart="drag(event)">id_matricula</div>
                    <div draggable="true" class="draggable-item" id="attr-id_aluno_fk" ondragstart="drag(event)">id_aluno (FK)</div>
                    <div draggable="true" class="draggable-item" id="attr-id_curso_fk" ondragstart="drag(event)">id_curso (FK)</div>
                    <div draggable="true" class="draggable-item" id="attr-data_matricula" ondragstart="drag(event)">data_matricula</div>
                    <div draggable="true" class="draggable-item" id="attr-situacao" ondragstart="drag(event)">situacao</div>
                </div>
                <button onclick="checkModelagemDados()">Verificar</button>
                <div class="feedback" id="feedback-modelagem"></div>
            </div>

            <!-- Exercícios 2 a 10 Modelagem de Dados -->
            <!-- Para manter a ideia de 10 exercícios, aqui criação simplificada para exercícios... -->

            <hr>

            <div class="activity">
                <p><b>Exercício 2 - Tipo de relacionamento:</b></p>
                <p>Em um cenário onde um funcionário gerencia apenas um departamento, qual o tipo de relacionamento correto?</p>
                <label><input type="radio" name="md2" value="incorrect" /> 1:N (Um para muitos)</label>
                <label><input type="radio" name="md2" value="correct" /> 1:1 (Um para um)</label>
                <label><input type="radio" name="md2" value="incorrect" /> N:N (Muitos para muitos)</label>
                <button onclick="checkAnswer('md2', 'feedback-md2')">Responder</button>
                <div class="feedback" id="feedback-md2"></div>
            </div>

            <hr>

            <div class="activity">
                <p><b>Exercício 3 - Chave primária ideal:</b></p>
                <p>Para tabela que registra presença dos alunos em aulas, escolha a melhor chave primária.</p>
                <label><input type="radio" name="md3" value="correct" /> Chave composta: id_aluno + id_aula</label>
                <label><input type="radio" name="md3" value="incorrect" /> Campo id_presenca único</label>
                <label><input type="radio" name="md3" value="incorrect" /> id_aluno</label>
                <button onclick="checkAnswer('md3', 'feedback-md3')">Responder</button>
                <div class="feedback" id="feedback-md3"></div>
            </div>

            <hr>

            <div class="activity">
                <p><b>Exercício 4 - Montagem de tabela associativa:</b></p>
                <p>Considere Aluno e Curso. Qual o nome da tabela associativa e suas chaves?</p>
                <input type="text" id="input9_nome" placeholder="Nome da tabela (ex: matricula)" style="width: 60%; padding: 0.4rem;" />
                <input type="text" id="input9_chaves" placeholder="Chaves primárias separadas por vírgula" style="width: 60%; padding: 0.4rem; margin-top: 0.5rem;" />
                <button onclick="checkExercicio9()">Verificar</button>
                <div class="feedback" id="feedback-atividade9"></div>
            </div>

            <hr>

            <div class="activity">
                <p><b>Exercício 5 - Distribua atributos para pedido e cliente:</b></p>
                <p>Arraste atributos para as entidades corretas.</p>
                <div style="display: flex; gap: 20px; margin-bottom: 1rem;">
                    <div style="flex: 1; border: 2px solid var(--senac-border); border-radius: 6px; padding: 1rem;">
                        <h4>Pedido</h4>
                        <div id="drop-pedido10" class="drop-target" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
                    </div>
                    <div style="flex: 1; border: 2px solid var(--senac-border); border-radius: 6px; padding: 1rem;">
                        <h4>Cliente</h4>
                        <div id="drop-cliente10" class="drop-target" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
                    </div>
                </div>
                <div class="drag-container" id="drag-container10">
                    <div class="draggable-item" id="attr-id_pedido10" draggable="true" ondragstart="drag(event)">id_pedido</div>
                    <div class="draggable-item" id="attr-data_pedido10" draggable="true" ondragstart="drag(event)">data_pedido</div>
                    <div class="draggable-item" id="attr-status_pedido10" draggable="true" ondragstart="drag(event)">status</div>
                    <div class="draggable-item" id="attr-id_cliente_fk10" draggable="true" ondragstart="drag(event)">id_cliente (FK)</div>
                    <div class="draggable-item" id="attr-id_cliente10" draggable="true" ondragstart="drag(event)">id_cliente</div>
                    <div class="draggable-item" id="attr-nome_cliente10" draggable="true" ondragstart="drag(event)">nome</div>
                    <div class="draggable-item" id="attr-email_cliente10" draggable="true" ondragstart="drag(event)">email</div>
                </div>
                <button onclick="checkExemplo10()">Verificar</button>
                <div class="feedback" id="feedback-atividade10"></div>
            </div>

            <hr>

            <div class="activity">
                <p><b>Exercício 6 - Tipo de dado adequado para data de nascimento:</b></p>
                <label><input type="radio" name="md6" value="correct" /> DATE</label>
                <label><input type="radio" name="md6" value="incorrect" /> VARCHAR</label>
                <label><input type="radio" name="md6" value="incorrect" /> INTEGER</label>
                <button onclick="checkAnswer('md6', 'feedback-md6')">Responder</button>
                <div class="feedback" id="feedback-md6"></div>
            </div>

            <hr>

            <div class="activity">
                <p><b>Exercício 7 - Relação N:N resolvida por:</b></p>
                <label><input type="radio" name="md7" value="correct" /> Tabela associativa</label>
                <label><input type="radio" name="md7" value="incorrect" /> Chave primária simples</label>
                <label><input type="radio" name="md7" value="incorrect" /> Única tabela</label>
                <button onclick="checkAnswer('md7', 'feedback-md7')">Responder</button>
                <div class="feedback" id="feedback-md7"></div>
            </div>

            <hr>

            <div class="activity">
                <p><b>Exercício 8 - Identifique o relacionamento :</b></p>
                <p>Um funcionário gerencia somente um departamento, que é gerenciado por ele. Qual relacionamento?</p>
                <label><input type="radio" name="md8" value="incorrect" /> 1:N</label>
                <label><input type="radio" name="md8" value="correct" /> 1:1</label>
                <label><input type="radio" name="md8" value="incorrect" /> N:N</label>
                <button onclick="checkAnswer('md8', 'feedback-md8')">Responder</button>
                <div class="feedback" id="feedback-md8"></div>
            </div>

            <hr>

            <div class="activity">
                <p><b>Exercício 9 - Completar nome e chaves:</b></p>
                <input type="text" id="input9_nome" placeholder="Nome da tabela associativa" style="width: 60%; padding: 0.4rem;" />
                <input type="text" id="input9_chaves" placeholder="Chaves primárias, separadas por vírgula" style="width: 60%; padding: 0.4rem; margin-top: 0.5rem;" />
                <button onclick="checkExercicio9()">Verificar</button>
                <div class="feedback" id="feedback-atividade9"></div>
            </div>

            <hr>

            <div class="activity">
                <p><b>Exercício 10 - Associar atributos a Pedido e Cliente</b></p>
                <p>Arraste os atributos para os locais corretos</p>
                <button onclick="checkExemplo10()">Verificar</button>
                <div class="feedback" id="feedback-atividade10"></div>
            </div>
        </section>

        <!-- ======= PK / FK ======= -->
        <section id="tab2">
            <h2>Chaves Primária e Estrangeira (PK e FK)</h2>
            <p>Entendendo a importância da Chave Primária (PK) e Chave Estrangeira (FK) no banco de dados:</p>
            <ul>
                <li><b>PK</b>: Atributo ou conjunto de atributos que identifica de forma única cada registro.</li>
                <li><b>FK</b>: Atributo que referencia uma PK em outra tabela, estabelecendo relacionamento.</li>
            </ul>

            <div class="activity">
                <p><b>Exercício 2-1: Qual campo é uma PK adequada para Cliente?</b></p>
                <label><input type="radio" name="pk1" value="correct" /> CPF</label>
                <label><input type="radio" name="pk1" value="incorrect" /> Nome</label>
                <label><input type="radio" name="pk1" value="incorrect" /> Endereço</label>
                <button onclick="checkAnswer('pk1', 'feedback-pk1')">Responder</button>
                <div id="feedback-pk1" class="feedback"></div>
            </div>

            <div class="activity">
                <p><b>Exercício 2-2: A função da FK é:</b></p>
                <label><input type="radio" name="fk1" value="correct"/> Referenciar uma PK de outra tabela</label>
                <label><input type="radio" name="fk1" value="incorrect"/> Identificar registros únicos</label>
                <label><input type="radio" name="fk1" value="incorrect"/> Armazenar dados duplicados</label>
                <button onclick="checkAnswer('fk1', 'feedback-fk1')">Responder</button>
                <div id="feedback-fk1" class="feedback"></div>
            </div>

            <div class="activity">
                <p><b>Exercício 2-3: Associe os atributos ao seu papel (PK ou FK) no sistema:</b></p>
                <p>Arraste e solte os atributos nos locais indicados.</p>
                <div style="display:flex;gap:1rem;margin-bottom:1rem;">
                    <div style="flex:1">
                        <h4>Entidade: Pedido - PK</h4>
                        <div class="drop-target" id="drop-pk-pedido" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
                    </div>
                    <div style="flex:1">
                        <h4>Entidade: Produto - PK</h4>
                        <div class="drop-target" id="drop-pk-produto" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
                    </div>
                    <div style="flex:1">
                        <h4>Entidade: Pedido - FK</h4>
                        <div class="drop-target" id="drop-fk-pedido" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
                    </div>
                </div>
                <div class="drag-container" id="drag-pkfk">
                    <div draggable="true" class="draggable-item" id="attr-id-pedido-pk" ondragstart="drag(event)">id_pedido</div>
                    <div draggable="true" class="draggable-item" id="attr-id-produto-pk" ondragstart="drag(event)">id_produto</div>
                    <div draggable="true" class="draggable-item" id="attr-id-pedido-fk" ondragstart="drag(event)">id_pedido (FK)</div>
                </div>
                <button onclick="checkPkFk()">Verificar</button>
                <div id="feedback-pkfk" class="feedback"></div>
            </div>
        </section>

        <!-- ======= Tabelas Associativas ======= -->
        <section id="tab6">
            <h2>Tabelas Associativas</h2>

            <p>As tabelas associativas resolvem relacionamentos muitos-para-muitos (N:N) entre entidades, criando uma tabela intermediária que armazena essas associações.</p>

            <h3>Exemplos práticos</h3>
            <ul>
                <li><b>Escola:</b> Aluno, Curso, Matrícula</li>
                <li><b>E-commerce:</b> Pedido, Produto, ItensPedido (associativa)</li>
                <li><b>Biblioteca:</b> Livro, Autor, LivroAutor (associativa)</li>
                <li><b>Academia:</b> Aluno, Treino, PlanoTreino (associativa)</li>
                <li><b>Cinema:</b> Filme, Sessão, Exibição (associativa)</li>
            </ul>

            <!-- Exercício 6-1 -->
            <div class="activity">
                <p><b>Exercício 6-1: O que é uma tabela associativa?</b></p>
                <label><input type="radio" name="ta1" value="correct" /> Uma tabela que resolve relacionamentos N:N entre entidades</label>
                <label><input type="radio" name="ta1" value="incorrect" /> Uma tabela com chave simples apenas</label>
                <label><input type="radio" name="ta1" value="incorrect" /> Uma tabela sem chaves primárias</label>
                <button onclick="checkAnswer('ta1', 'feedback-ta1')">Responder</button>
                <div id="feedback-ta1" class="feedback"></div>
            </div>

            <!-- Exercício 6-2 -->
            <div class="activity">
                <p><b>Exercício 6-2: Nome da tabela associativa para Aluno-Curso?</b></p>
                <input type="text" id="ta2name" placeholder="Nome da tabela associativa"/>
                <input type="text" id="ta2keys" placeholder="Chaves primárias separadas por vírgula"/>
                <button onclick="checkTa2()">Verificar</button>
                <div id="feedback-ta2check" class="feedback"></div>
            </div>

            <!-- Exercício 6-3 Drag and Drop -->
            <div class="activity">
                <p><b>Exercício 6-3: Organize os atributos</b> da tabela associativa ItensPedido e associados</p>
                <div style="display:flex;gap:1rem;margin-bottom:1rem;">
                    <div style="flex:1">
                        <h4>Pedido</h4>
                        <div class="drop-target" id="drop-ta-pedido" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
                    </div>
                    <div style="flex:1">
                        <h4>Produto</h4>
                        <div class="drop-target" id="drop-ta-produto" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
                    </div>
                    <div style="flex:1">
                        <h4>ItensPedido (Associativa)</h4>
                        <div class="drop-target" id="drop-ta-itenspedido" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
                    </div>
                </div>
                <div class="drag-container" id="drag-ta">
                    <div draggable="true" id="attr-ta-id-pedido" class="draggable-item" ondragstart="drag(event)">id_pedido</div>
                    <div draggable="true" id="attr-ta-data-pedido" class="draggable-item" ondragstart="drag(event)">data_pedido</div>
                    <div draggable="true" id="attr-ta-id-produto" class="draggable-item" ondragstart="drag(event)">id_produto</div>
                    <div draggable="true" id="attr-ta-nome-produto" class="draggable-item" ondragstart="drag(event)">nome_produto</div>
                    <div draggable="true" id="attr-ta-id-pedido-fk" class="draggable-item" ondragstart="drag(event)">id_pedido (FK)</div>
                    <div draggable="true" id="attr-ta-id-produto-fk" class="draggable-item" ondragstart="drag(event)">id_produto (FK)</div>
                    <div draggable="true" id="attr-ta-quantidade" class="draggable-item" ondragstart="drag(event)">quantidade</div>
                </div>
                <button onclick="checkTa3()">Verificar</button>
                <div id="feedback-ta3check" class="feedback"></div>
                <img id="img-ta3" class="diagram" src="MER_ta3.png" alt="Diagrama ItensPedido" style="display:none; margin-top:1rem;">
            </div>

            <!-- Exercício 6-4 Verdadeiro/Falso -->
            <div class="activity">
                <p><b>Exercício 6-4: Verdadeiro ou Falso?</b></p>
                <p>Tabela associativa sempre tem chave composta com as FKs.</p>
                <label><input type="radio" name="ta4" value="correct" /> Verdadeiro</label>
                <label><input type="radio" name="ta4" value="incorrect" /> Falso</label>
                <button onclick="checkAnswer('ta4', 'feedback-ta4')">Responder</button>
                <div id="feedback-ta4" class="feedback"></div>
            </div>

            <!-- Exercício 6-5 Conceitual -->
            <div class="activity">
                <p><b>Exercício 6-5: Qual a função principal de uma tabela associativa?</b></p>
                <label><input type="radio" name="ta5" value="correct" /> Resolver relacionamentos N:N</label>
                <label><input type="radio" name="ta5" value="incorrect" /> Armazenar dados duplicados</label>
                <label><input type="radio" name="ta5" value="incorrect" /> Substituir tabelas</label>
                <button onclick="checkAnswer('ta5', 'feedback-ta5')">Responder</button>
                <div id="feedback-ta5" class="feedback"></div>
            </div>

            <!-- Exercício 6-6 Completar frase -->
            <div class="activity">
                <p><b>Exercício 6-6: Complete a frase</b></p>
                <p>A tabela associativa
                    <input type="text" id="ta6-name" placeholder="nome da tabela (ex: matricula ou itenspedido)" />
                    tem como chave composta as colunas
                    <input type="text" id="ta6-keys" placeholder="ex: id_aluno,id_curso ou id_pedido,id_produto" />
                </p>
                <button onclick="checkTa6()">Verificar</button>
                <div id="feedback-ta6" class="feedback"></div>
            </div>

            <!-- Exercício 7 Desafio Máster -->
            <div class="activity">
                <h3>Exercício 7: Desafio integração completa</h3>
                <p>No exemplo complexo com as entidades: Aluno, Curso, Turma, Matéria, Professor, Matrícula, como se chama a tabela que associa um aluno a um curso e uma turma, e quais são suas chaves primárias (nomes)?</p>
                <input type="text" id="ta7-name" placeholder="Nome da tabela (ex: matricula)" />
                <input type="text" id="ta7-keys" placeholder="Chaves primárias (ex: id_aluno,id_curso,id_turma)" />
                <button onclick="checkTa7()">Verificar</button>
                <div id="feedback-ta7" class="feedback"></div>
                <img id="img-ta7" src="MER_ta1.png" alt="MER completo" style="display:none;width:100%;margin-top:1rem;" />
            </div>

            <!-- Exercício 8 Desafio Drag e Drop -->
            <div class="activity">
                <h3>Exercício 8: Desafio Drag & Drop complexo</h3>
                <p>Prepare o modelo do Restaurante (Cliente, Pedido, Prato, Ingrediente, PedidoPrato, PratoIngrediente). Arrume os atributos corretamente.</p>
                <div style="display:flex;gap:15px;flex-wrap:wrap;margin-bottom:1rem;">
                    <div class="dropzone" id="drop-ta8-cliente">Cliente</div>
                    <div class="dropzone" id="drop-ta8-pedido">Pedido</div>
                    <div class="dropzone" id="drop-ta8-prato">Prato</div>
                    <div class="dropzone" id="drop-ta8-ingrediente">Ingrediente</div>
                    <div class="dropzone" id="drop-ta8-pedidoprato">PedidoPrato (associativa)</div>
                    <div class="dropzone" id="drop-ta8-pratoingrediente">PratoIngrediente (associativa)</div>
                </div>
                <div class="drag-container" id="drag-ta8">
                    <div draggable="true" id="attr-ta8-idcliente" class="draggable-item" ondragstart="drag(event)">id_cliente</div>
                    <div draggable="true" id="attr-ta8-nomecliente" class="draggable-item" ondragstart="drag(event)">nome_cliente</div>
                    <div draggable="true" id="attr-ta8-idpedido" class="draggable-item" ondragstart="drag(event)">id_pedido</div>
                    <div draggable="true" id="attr-ta8-datapedido" class="draggable-item" ondragstart="drag(event)">data_pedido</div>
                    <div draggable="true" id="attr-ta8-idprato" class="draggable-item" ondragstart="drag(event)">id_prato</div>
                    <div draggable="true" id="attr-ta8-nomeprato" class="draggable-item" ondragstart="drag(event)">nome_prato</div>
                    <div draggable="true" id="attr-ta8-idingrediente" class="draggable-item" ondragstart="drag(event)">id_ingrediente</div>
                    <div draggable="true" id="attr-ta8-nomeingrediente" class="draggable-item" ondragstart="drag(event)">nome_ingrediente</div>
                    <div draggable="true" id="attr-ta8-idpedido-fk" class="draggable-item" ondragstart="drag(event)">id_pedido (FK)</div>
                    <div draggable="true" id="attr-ta8-idprato-pk" class="draggable-item" ondragstart="drag(event)">id_prato (PK)</div>
                    <div draggable="true" id="attr-ta8-idprato-fk" class="draggable-item" ondragstart="drag(event)">id_prato (FK)</div>
                    <div draggable="true" id="attr-ta8-idingrediente-fk" class="draggable-item" ondragstart="drag(event)">id_ingrediente (FK)</div>
                </div>
                <button onclick="checkTa8()">Verificar</button>
                <div id="feedback-ta8" class="feedback"></div>
                <img id="img-ta8" src="MER_ta5.png" alt="MER Restaurante" style="display:none;width:100%;margin-top:1rem;" />
            </div>

            <!-- Exercício 9 Verdadeiro/Falso -->
            <div class="activity">
                <p><b>Exercício 9: Verdadeiro ou falso</b>: Uma tabela associativa pode conter atributos adicionais além das chaves (ex: data, quantidade).</p>
                <label><input type="radio" name="ta9" value="correct" /> Verdadeiro</label><br />
                <label><input type="radio" name="ta9" value="incorrect" /> Falso</label>
                <button onclick="checkAnswer('ta9', 'feedback-ta9')">Responder</button>
                <div id="feedback-ta9" class="feedback"></div>
            </div>

            <!-- Exercício 10 Desafio Final -->
            <div class="activity">
                <h3>Exercício 10: Associe Encomenda, Motorista e Veículo para Entrega</h3>
                <p>Em sistema logístico com entidades Encomenda, Motorista, Veículo, Rota, Cliente e Entrega...</p>
                <p>Qual o nome da tabela associativa que conecta esses três elementos para registrar entregas? E quais as chaves primárias?</p>
                <input type="text" id="ta10-name" placeholder="Nome da tabela, ex: entrega" style="width: 45%;" />
                <input type="text" id="ta10-keys" placeholder="Chaves primárias, ex: id_encomenda,id_motorista,id_veiculo" style="width: 50%;" />
                <button onclick="checkTa10()">Verificar</button>
                <div id="feedback-ta10" class="feedback"></div>
                <img id="img-ta10" src="MER_ta4.png" alt="MER Logística" style="display:none;width:100%;margin-top:1rem;" />
            </div>

        </section>
    </main>
    <footer>Desenvolvido para Senac SP - Aula Interativa Banco de Dados</footer>

    <script>
        // Navigation tabs
        const tabs = document.querySelectorAll('.tab-button');
        const sections = document.querySelectorAll('section');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                sections.forEach(s => s.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(tab.dataset.tab).classList.add('active');
                localStorage.setItem('activeTab', tab.dataset.tab);
            });
        });
        window.addEventListener('DOMContentLoaded', () => {
            const saved = localStorage.getItem('activeTab');
            if(saved) {
                const btn = document.querySelector(`.tab-button[data-tab="${saved}"]`);
                if(btn) btn.click();
            }
        });

        // Drag and drop universal handlers
        function allowDrop(ev) {
            ev.preventDefault();
        }
        function drag(ev) {
            ev.dataTransfer.setData('text', ev.target.id);
        }
        function drop(ev) {
            ev.preventDefault();
            const id = ev.dataTransfer.getData('text');
            const dragged = document.getElementById(id);
            let target = ev.target;
            while(target && !target.classList.contains('drop-target') && !target.classList.contains('dropzone')) {
                target = target.parentElement;
            }
            if(target && !target.contains(dragged)) {
                target.appendChild(dragged);
            }
        }

        // Utilities
        function checkAnswer(groupName, feedbackId) {
            const options = document.getElementsByName(groupName);
            const feedback = document.getElementById(feedbackId.startsWith('feedback-') ? feedbackId : ('feedback-' + feedbackId));
            let selected = false, correct = false;
            for(const opt of options) {
                if(opt.checked) {
                    selected = true;
                    correct = (opt.value === 'correct');
                    break;
                }
            }
            if(!selected) {
                feedback.textContent = 'Por favor, selecione uma opção.';
                feedback.className = 'feedback incorrect';
                return;
            }
            if(correct) {
                feedback.textContent = 'Resposta correta!';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'Resposta incorreta, tente novamente.';
                feedback.className = 'feedback incorrect';
            }
        }

        // Modelagem de Dados check
        function checkModelagemDados() {
            const dropCurso = document.getElementById('drop-curso');
            const dropMatricula = document.getElementById('drop-matricula');
            const feedback = document.getElementById('feedback-modelagem');
            const cursoKeys = ['attr-id_curso', 'attr-nome_curso', 'attr-duracao_meses', 'attr-categoria'];
            const matriculaKeys = ['attr-id_matricula', 'attr-id_aluno_fk', 'attr-id_curso_fk', 'attr-data_matricula', 'attr-situacao'];

            if(checkChildrenIds(dropCurso, cursoKeys) && checkChildrenIds(dropMatricula, matriculaKeys)) {
                feedback.textContent = 'Parabéns! Resposta correta.';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'Alguns atributos foram posicionados incorretamente.';
                feedback.className = 'feedback incorrect';
            }
        }

        function checkChildrenIds(container, expectedIds) {
            if(!container) return false;
            if(container.children.length !== expectedIds.length) return false;
            for(let id of expectedIds) {
                if(!container.querySelector(`#${id}`)) return false;
            }
            return true;
        }

        // PK/FK Check
        function checkPkFk() {
            const dropPkPedido = document.getElementById('drop-pk-pedido');
            const dropPkProduto = document.getElementById('drop-pk-produto');
            const dropFkPedido = document.getElementById('drop-fk-pedido');
            const feedback = document.getElementById('feedback-pkfk');

            if(!dropPkPedido || !dropPkProduto || !dropFkPedido) {
                feedback.textContent = 'Elementos de drop não encontrados!';
                feedback.className = 'feedback incorrect';
                return;
            }
            const pkPedidoKeys = ['attr-id-pedido-pk'];
            const pkProdutoKeys = ['attr-id-produto-pk'];
            const fkPedidoKeys = ['attr-id-pedido-fk'];

            if(checkChildrenIds(dropPkPedido, pkPedidoKeys) && checkChildrenIds(dropPkProduto, pkProdutoKeys) && checkChildrenIds(dropFkPedido, fkPedidoKeys)) {
                feedback.textContent = 'Muito bem! Valores corretos.';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'Posicionamento incorreto dos atributos.';
                feedback.className = 'feedback incorrect';
            }
        }

        // Tabelas Associativas Checks
        function checkTa2() {
            const nameTxt = document.getElementById('ta2name').value.trim().toLowerCase();
            const keysTxt = document.getElementById('ta2keys').value.trim().toLowerCase().replace(/\s/g,'');
            const keysArr = keysTxt.split(',');
            const feedback = document.getElementById('feedback-ta2check');

            if(nameTxt === 'matricula' && keysArr.includes('id_aluno') && keysArr.includes('id_curso') && keysArr.length === 2) {
                feedback.textContent = 'Correto!';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'Confira nome e chaves (id_aluno,id_curso)';
                feedback.className = 'feedback incorrect';
            }
        }

        function checkTa3() {
            const feedback = document.getElementById('feedback-ta3check');
            const img = document.getElementById('img-ta3');
            const expected = {
                'drop-ta-pedido': ['attr-ta-id-pedido', 'attr-ta-data-pedido'],
                'drop-ta-produto': ['attr-ta-id-produto', 'attr-ta-nome-produto'],
                'drop-ta-itenspedido': ['attr-ta-id-pedido-fk', 'attr-ta-id-produto-fk', 'attr-ta-quantidade'],
            };
            for(let k in expected) {
                let box = document.getElementById(k);
                if(!checkChildrenIds(box, expected[k])) {
                    feedback.textContent = 'Campos sujos ou errados. Revise a distribuição.';
                    feedback.className = 'feedback incorrect';
                    if(img) img.style.display = 'none';
                    return;
                }
            }
            feedback.textContent = 'Parabéns! Correto.';
            feedback.className = 'feedback correct';
            if(img) img.style.display = 'block';
        }

        function checkTa6() {
            let nameInp = document.getElementById('ta6-name').value.trim().toLowerCase();
            let keysInp = document.getElementById('ta6-keys').value.trim().toLowerCase().replace(/\s/g,'').split(',');
            const feedback = document.getElementById('feedback-ta6');
            const accepted = [
                {name: 'matricula', keys: ['id_aluno','id_curso']},
                {name: 'itenspedido', keys: ['id_pedido','id_produto']}
            ];
            let good = accepted.some(obj => obj.name === nameInp && obj.keys.every(k => keysInp.includes(k)) && keysInp.length === obj.keys.length);
            if(good){
                feedback.textContent = 'Resposta aceita.';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'Revise nome e chaves.';
                feedback.className = 'feedback incorrect';
            }
        }

        function checkDesafio7() {
            const nome = document.getElementById('ta7-name').value.trim().toLowerCase();
            const keysRaw = document.getElementById('ta7-keys').value.trim().toLowerCase();
            const keys = keysRaw.replace(/\s/g, '').split(',');
            const feedback = document.getElementById('feedback-ta7');
            const img = document.getElementById('img-ta7');
            const correctKeys = ['id_aluno', 'id_curso', 'id_turma'];

            if (nome === 'matricula' && correctKeys.every(k => keys.includes(k)) && keys.length === correctKeys.length) {
                feedback.textContent = 'Resposta correta!';
                feedback.className = 'feedback correct';
                if (img) img.style.display = 'block';
            } else {
                feedback.textContent = 'Revise nome e chaves.';
                feedback.className = 'feedback incorrect';
                if (img) img.style.display = 'none';
            }
        }

        function checkTa8() {
            const feedback = document.getElementById('feedback-ta8');
            const img = document.getElementById('img-ta8');
            const expected = {
                'drop-ta8-cliente': ['attr-ta8-idcliente', 'attr-ta8-nomecliente'],
                'drop-ta8-pedido': ['attr-ta8-idpedido', 'attr-ta8-datapedido'],
                'drop-ta8-prato': ['attr-ta8-idprato', 'attr-ta8-nomeprato'],
                'drop-ta8-ingrediente': ['attr-ta8-idingrediente', 'attr-ta8-nomeingrediente'],
                'drop-ta8-pedidoprato': ['attr-ta8-idpedido-fk', 'attr-ta8-idprato-pk'],
                'drop-ta8-pratoingrediente': ['attr-ta8-idprato-fk', 'attr-ta8-idingrediente-fk']
            };
            for(let k in expected) {
                let box = document.getElementById(k);
                if(!box || !checkChildrenIds(box, expected[k])) {
                    feedback.textContent = 'Campos errados ou faltando.';
                    feedback.className = 'feedback incorrect';
                    if(img) img.style.display = 'none';
                    return;
                }
            }
            feedback.textContent = 'Muito bem! Tudo correto.';
            feedback.className = 'feedback correct';
            if(img) img.style.display = 'block';
        }

        function checkExemplo10() {
            const feedback = document.getElementById('feedback-atividade10');
            const drops = {
                'drop-pedido10': ['attr-id_pedido10', 'attr-data_pedido10', 'attr-status_pedido10', 'attr-id_cliente_fk10'],
                'drop-cliente10': ['attr-id_cliente10', 'attr-nome_cliente10', 'attr-email_cliente10']
            };
            for (const entityId in drops) {
                let container = document.getElementById(entityId);
                if (!checkChildrenIds(container, drops[entityId])) {
                    feedback.textContent = 'Há atributos fora do lugar. Verifique novamente as entidades.';
                    feedback.className = 'feedback incorrect';
                    return;
                }
            }
            feedback.textContent = 'Parabéns! Todos os atributos foram distribuídos corretamente.';
            feedback.className = 'feedback correct';
        }

        function checkExercicio9() {
            const nomeTabela = document.getElementById('input9_nome').value.trim().toLowerCase();
            const chavesStr = document.getElementById('input9_chaves').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback-atividade9');

            const nomeCorreto = 'matricula';
            const chavesCorretas = ['id_aluno', 'id_curso'];

            const chaves = chavesStr.split(',').map(s => s.trim());

            if(nomeTabela === nomeCorreto &&
                chavesCorretas.every(c => chaves.includes(c)) &&
                chaves.length === chavesCorretas.length) {
                feedback.textContent = 'Muito bem! Você identificou corretamente a tabela associativa e suas chaves.';
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = 'Resposta incorreta. Lembre-se que a tabela associativa deve conter os dois IDs como chave composta.';
                feedback.className = 'feedback incorrect';
            }
        }

        function checkTa10() {
            const nome = document.getElementById('ta10-name').value.trim().toLowerCase();
            const keysRaw = document.getElementById('ta10-keys').value.trim().toLowerCase();
            const keys = keysRaw.replace(/\s/g, '').split(',');
            const feedback = document.getElementById('feedback-ta10');
            const img = document.getElementById('img-ta10');
            const correctKeys = ['id_encomenda', 'id_motorista', 'id_veiculo'];

            if ((nome === 'entrega' || nome === 'entregas') && correctKeys.every(k => keys.includes(k)) && keys.length === correctKeys.length) {
                feedback.textContent = 'Correto! \'Entrega\' com chaves compostas.';
                feedback.className = 'feedback correct';
                if (img) img.style.display = 'block';
            } else {
                feedback.textContent = 'Confira o nome e as chaves esperadas.';
                feedback.className = 'feedback incorrect';
                if (img) img.style.display = 'none';
            }
        }
    </script>
</body>
</html>



